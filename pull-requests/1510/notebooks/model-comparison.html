
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="../_static/logo.png" sizes="482x536" rel="icon" type="image/png">
    <title>Comparative Analysis of Pedestrian Dynamics Models &#8212; JuPedSim  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=d742c9ce" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/model-comparison';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.15.4';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://www.jupedsim.org/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'v2.0.0';
        DOCUMENTATION_OPTIONS.show_version_warning_banner = false;
        </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Movement around Corners" href="corner.html" />
    <link rel="prev" title="Notebooks" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
    
    <img src="../_static/jupedsim.svg" class="logo__image only-light" alt="JuPedSim  documentation - Home"/>
    <script>document.write(`<img src="../_static/jupedsim.svg" class="logo__image only-dark" alt="JuPedSim  documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/PedestrianDynamics/jupedsim" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/jupedsim/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/pypi/v/jupedsim" class="icon-link-image" alt="PyPI"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://doi.org/10.5281/zenodo.1293771" title="DOI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.1293771.svg" class="icon-link-image" alt="DOI"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../concepts/index.html">Concepts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../concepts/geometry.html">Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concepts/routing.html">Routing</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../pedestrian_models/index.html">Pedestrian Models</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Notebooks</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Comparative Analysis of Pedestrian Dynamics Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="corner.html">Movement around Corners</a></li>

<li class="toctree-l2"><a class="reference internal" href="double-bottleneck.html">Movement through Bottlenecks</a></li>

<li class="toctree-l2"><a class="reference internal" href="journey.html">How to work with Journeys</a></li>

<li class="toctree-l2"><a class="reference internal" href="lane-formation.html">Lane formation in bi-directional flow</a></li>

<li class="toctree-l2"><a class="reference internal" href="motivation.html">Modelling Motivation</a></li>

<li class="toctree-l2"><a class="reference internal" href="queues_waiting.html">Waiting in Queues</a></li>

<li class="toctree-l2"><a class="reference internal" href="routing.html">How Route Choice can Impact Evacuation Times</a></li>

<li class="toctree-l2"><a class="reference internal" href="single-file.html">Simulating Single-File Movement</a></li>

</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../disclaimer.html">Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/jupedsim/index.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../citation/citation.html">Cite JuPedSim</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<script>
document.write(`
  <div class="version-switcher__container dropdown">
    <button id="pst-version-switcher-button-2"
      type="button"
      class="version-switcher__button btn btn-sm dropdown-toggle"
      data-bs-toggle="dropdown"
      aria-haspopup="listbox"
      aria-controls="pst-version-switcher-list-2"
      aria-label="Version switcher list"
    >
      Choose version  <!-- this text may get changed later by javascript -->
      <span class="caret"></span>
    </button>
    <div id="pst-version-switcher-list-2"
      class="version-switcher__menu dropdown-menu list-group-flush py-0"
      role="listbox" aria-labelledby="pst-version-switcher-button-2">
      <!-- dropdown will be populated by javascript on page load -->
    </div>
  </div>
`);
</script></div>
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script></div>
      
        <div class="header-article-item"><button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Comparative Analysis of Pedestrian Dynamics Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">Objective</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#force-based-models">Force-Based Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-based-models">Velocity-Based Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computational-efficiency">Computational Efficiency</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-selection-guidance">Model Selection Guidance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#models-under-investigation">Models Under Investigation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-1-crossing-paths-in-rooms">Scenario 1: Crossing Paths in Rooms</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#csm-simulation">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avm-simulation">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sfm-simulation">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gcfm-simulation">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evacuation-times">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-2-following-behavior">Scenario 2: Following Behavior</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">GCFM Simulation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-3-head-on-encounter">Scenario 3: Head-on Encounter</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-4-perpendicular-crossing">Scenario 4: Perpendicular Crossing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-5-movement-of-individuals-in-a-bottleneck">Scenario 5: Movement of individuals in a bottleneck</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Evacuation times</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="comparative-analysis-of-pedestrian-dynamics-models">
<h1>Comparative Analysis of Pedestrian Dynamics Models<a class="headerlink" href="#comparative-analysis-of-pedestrian-dynamics-models" title="Link to this heading">#</a></h1>
<section id="objective">
<h2>Objective<a class="headerlink" href="#objective" title="Link to this heading">#</a></h2>
<p>This notebook compares four pedestrian dynamics models by simulating agent behavior in a<br />
structured environment. Using simplified scenarios, we analyze how each model handles<br />
navigation, obstacle avoidance, and agent interactions. This comparison reveals the strengths<br />
and weaknesses of each approach, helping inform model selection when using JuPedSim.</p>
<p>When choosing a pedestrian dynamics model in JuPedSim, the decision largely depends on the<br />
specific scenario you want to simulate or the behavior you want to reproduce. The available<br />
models can be divided into two main categories: <strong>force-based</strong> and <strong>velocity-based</strong> models,<br />
each with their own strengths and limitations.</p>
<section id="force-based-models">
<h3>Force-Based Models<a class="headerlink" href="#force-based-models" title="Link to this heading">#</a></h3>
<p>Force-based models, which include the <strong>Social Force Model (SFM)</strong> and the <strong>Generalized<br />
Centrifugal Force Model (GCFM)</strong>, excel at simulating physical interactions between pedestrians.<br />
These models are particularly effective at capturing pushing behavior in dense crowds, making<br />
them ideal for evacuation scenarios or situations where physical contact between pedestrians<br />
is common. The <strong>GCFM</strong> offers some improvements over the basic <strong>SFM</strong>, particularly in handling<br />
body shape effects.</p>
</section>
<section id="velocity-based-models">
<h3>Velocity-Based Models<a class="headerlink" href="#velocity-based-models" title="Link to this heading">#</a></h3>
<p>On the other hand, velocity-based models like the <strong>Collision-Free Model (CFM)</strong> and the<br />
<strong>Anticipation Velocity Model (AVM)</strong> are better suited for normal walking situations where<br />
collision avoidance is the primary concern. These models typically produce smoother, more<br />
realistic trajectories in regular-density scenarios. The <strong>AVM</strong>, in particular, stands out for<br />
its superior collision avoidance capabilities and ability to reproduce lane formation behavior,<br />
as demonstrated in <a class="reference external" href="https://doi.org/10.1016/j.trc.2021.103464">recent research</a>.</p>
</section>
<section id="computational-efficiency">
<h3>Computational Efficiency<a class="headerlink" href="#computational-efficiency" title="Link to this heading">#</a></h3>
<p>When it comes to computational efficiency, velocity-based models generally have an advantage.<br />
The <strong>CFM</strong> offers the fastest execution times, while the <strong>AVM</strong> provides a good balance between<br />
computational efficiency and realistic behavior simulation. Force-based models, while more<br />
computationally intensive, are necessary when accurate physical interaction modeling is crucial.</p>
</section>
<section id="model-selection-guidance">
<h3>Model Selection Guidance<a class="headerlink" href="#model-selection-guidance" title="Link to this heading">#</a></h3>
<p>The choice of model ultimately comes down to your specific requirements:</p>
<ul class="simple">
<li><p><strong>Force-based models (SFM, GCFM):</strong> Best for emergency evacuations or crowded environments<br />
with significant physical interactions.</p></li>
<li><p><strong>Velocity-based models (AVM):</strong> Ideal for typical pedestrian scenarios requiring smooth<br />
navigation and realistic avoidance behavior.</p></li>
<li><p><strong>Collision-Free Model (CFM):</strong> Suitable when computational resources are limited and<br />
physical interactions are not critical.</p></li>
</ul>
<p>The key is to understand that no single model is universally superiorâ€”each has its place<br />
depending on the specific requirements of your simulation scenario.</p>
<p><strong>So as a final facit, which model to use? The answer is: it depends.</strong></p>
</section>
</section>
<section id="models-under-investigation">
<h2>Models Under Investigation<a class="headerlink" href="#models-under-investigation" title="Link to this heading">#</a></h2>
<p>In this notebooks the models compared are:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://pedestriandynamics.org/models/collision_free_speed_model/"><strong>Collision-Free Speed Model (CSM):</strong></a><br />
A velocity-based model focused on ensuring agents move without collisions<br />
by dynamically adjusting their speeds.</p></li>
<li><p><a class="reference external" href="https://doi.org/10.1016/j.trc.2021.103464"><strong>Anticipation Velocity Model (AVM):</strong></a><br />
A model that incorporates anticipation and reaction times, allowing agents<br />
to predict and avoid potential collisions.</p></li>
<li><p><a class="reference external" href="https://pedestriandynamics.org/models/social_force_model/"><strong>Social Force Model (SFM):</strong></a>
A force-based model where agents are influenced<br />
by attractive forces toward goals and repulsive forces
from obstacles and other agents.</p></li>
<li><p><a class="reference external" href="https://pedestriandynamics.org/models/generalized_centrifugal_force_model/"><strong>Generalized Centrifugal Force Model (GCFM):</strong></a><br />
An enhanced force-based model where agents experience centrifugal forces<br />
to better simulate realistic avoidance behavior.</p></li>
</ol>
<blockquote>
<div><p><strong>Note:</strong><br />
All models are utilized with their default parameter settings as defined in <strong>JuPedSim</strong>.</p>
</div></blockquote>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pathlib</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">jupedsim</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">jps</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pedpy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">jupedsim.internal.notebook_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">animate</span><span class="p">,</span> <span class="n">read_sqlite_file</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polygon</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.ops</span><span class="w"> </span><span class="kn">import</span> <span class="n">unary_union</span>


<span class="k">def</span><span class="w"> </span><span class="nf">initialize_simulation</span><span class="p">(</span>
    <span class="n">model</span><span class="p">,</span> <span class="n">agent_parameters</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="n">goals</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span><span class="p">,</span> <span class="n">trajectory_file</span>
<span class="p">):</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">jps</span><span class="o">.</span><span class="n">Simulation</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
        <span class="n">geometry</span><span class="o">=</span><span class="n">geometry</span><span class="p">,</span>
        <span class="n">dt</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">trajectory_writer</span><span class="o">=</span><span class="n">jps</span><span class="o">.</span><span class="n">SqliteTrajectoryWriter</span><span class="p">(</span>
            <span class="n">output_file</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">),</span> <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">exit_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">simulation</span><span class="o">.</span><span class="n">add_exit_stage</span><span class="p">(</span><span class="n">goal</span><span class="p">)</span> <span class="k">for</span> <span class="n">goal</span> <span class="ow">in</span> <span class="n">goals</span><span class="p">]</span>
    <span class="n">journey</span> <span class="o">=</span> <span class="n">jps</span><span class="o">.</span><span class="n">JourneyDescription</span><span class="p">(</span><span class="n">exit_ids</span><span class="p">)</span>
    <span class="n">journey_id</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">.</span><span class="n">add_journey</span><span class="p">(</span><span class="n">journey</span><span class="p">)</span>
    <span class="n">centroids</span> <span class="o">=</span> <span class="p">[</span><span class="n">polygon</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="n">goals</span><span class="p">]</span>
    <span class="n">orientations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">centroid</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">centroid</span><span class="p">,</span> <span class="n">position</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">centroids</span><span class="p">,</span> <span class="n">positions</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">exit_id</span><span class="p">,</span> <span class="n">orientation</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span><span class="p">,</span> <span class="n">exit_ids</span><span class="p">,</span> <span class="n">orientations</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">agent_parameters</span> <span class="o">==</span> <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">:</span>
            <span class="n">simulation</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span>
                <span class="n">agent_parameters</span><span class="p">(</span>
                    <span class="n">journey_id</span><span class="o">=</span><span class="n">journey_id</span><span class="p">,</span>
                    <span class="n">stage_id</span><span class="o">=</span><span class="n">exit_id</span><span class="p">,</span>
                    <span class="n">desired_speed</span><span class="o">=</span><span class="n">v0</span><span class="p">,</span>
                    <span class="n">position</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
                    <span class="n">anticipation_time</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">reaction_time</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">agent_parameters</span> <span class="o">==</span> <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">:</span>
            <span class="n">simulation</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span>
                <span class="n">agent_parameters</span><span class="p">(</span>
                    <span class="n">journey_id</span><span class="o">=</span><span class="n">journey_id</span><span class="p">,</span>
                    <span class="n">stage_id</span><span class="o">=</span><span class="n">exit_id</span><span class="p">,</span>
                    <span class="n">desiredSpeed</span><span class="o">=</span><span class="n">v0</span><span class="p">,</span>
                    <span class="n">position</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
                    <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span>
            <span class="n">agent_parameters</span>
            <span class="o">==</span> <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span>
        <span class="p">):</span>
            <span class="n">simulation</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span>
                <span class="n">agent_parameters</span><span class="p">(</span>
                    <span class="n">journey_id</span><span class="o">=</span><span class="n">journey_id</span><span class="p">,</span>
                    <span class="n">stage_id</span><span class="o">=</span><span class="n">exit_id</span><span class="p">,</span>
                    <span class="n">desired_speed</span><span class="o">=</span><span class="n">v0</span><span class="p">,</span>
                    <span class="n">position</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
                    <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">simulation</span><span class="o">.</span><span class="n">add_agent</span><span class="p">(</span>
                <span class="n">agent_parameters</span><span class="p">(</span>
                    <span class="n">journey_id</span><span class="o">=</span><span class="n">journey_id</span><span class="p">,</span>
                    <span class="n">stage_id</span><span class="o">=</span><span class="n">exit_id</span><span class="p">,</span>
                    <span class="n">position</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span>
                    <span class="n">desired_speed</span><span class="o">=</span><span class="n">v0</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">simulation</span>


<span class="k">def</span><span class="w"> </span><span class="nf">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">starting_positions</span><span class="p">,</span> <span class="n">exit_areas</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plot setup for visual inspection.&quot;&quot;&quot;</span>
    <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">pedpy</span><span class="o">.</span><span class="n">WalkableArea</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">pedpy</span><span class="o">.</span><span class="n">plot_walkable_area</span><span class="p">(</span><span class="n">walkable_area</span><span class="o">=</span><span class="n">walkable_area</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">exit_area</span> <span class="ow">in</span> <span class="n">exit_areas</span><span class="p">:</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="o">*</span><span class="n">exit_area</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">xy</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;indianred&quot;</span><span class="p">)</span>

    <span class="n">axes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">starting_positions</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Starting Position&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;x/m&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;y/m&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s2">&quot;equal&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">plot_evacuation_times</span><span class="p">(</span><span class="n">times_dict</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">)):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot evacuation times for different pedestrian models.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">)</span>

    <span class="n">bars</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">times_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="nb">list</span><span class="p">(</span><span class="n">times_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Evacuation Times by Model&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Time (seconds)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

    <span class="c1"># Add value labels on top of each bar</span>
    <span class="k">for</span> <span class="n">bar</span> <span class="ow">in</span> <span class="n">bars</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="n">bar</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="n">height</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">height</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>


<span class="k">def</span><span class="w"> </span><span class="nf">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">4000</span><span class="p">):</span>
    <span class="k">while</span> <span class="p">(</span>
        <span class="n">simulation</span><span class="o">.</span><span class="n">agent_count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="n">simulation</span><span class="o">.</span><span class="n">iteration_count</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">max_iterations</span>
    <span class="p">):</span>
        <span class="n">simulation</span><span class="o">.</span><span class="n">iterate</span><span class="p">()</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">_writer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Evacuation time: </span><span class="si">{</span><span class="n">simulation</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">simulation</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">()</span>


<span class="n">width</span> <span class="o">=</span> <span class="mi">600</span>
<span class="n">height</span> <span class="o">=</span> <span class="mi">600</span>
</pre></div>
</div>
</div>
</details>
</div>
</section>
<section id="scenario-1-crossing-paths-in-rooms">
<h2>Scenario 1: Crossing Paths in Rooms<a class="headerlink" href="#scenario-1-crossing-paths-in-rooms" title="Link to this heading">#</a></h2>
<p>Four agents navigate between interconnected rooms with obstacles. Each agent aims to reach the diagonally opposite goal. Agents are expected to plan paths around obstacles while interacting with other agents in the corridors.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_geometry_scenario1</span><span class="p">():</span>
    <span class="n">outer_boundary</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)])</span>
    <span class="n">corridor_walls</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">4.9</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.1</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.9</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">4.9</span><span class="p">,</span> <span class="mf">6.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.1</span><span class="p">,</span> <span class="mf">6.2</span><span class="p">),</span> <span class="p">(</span><span class="mf">5.1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">3.8</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">),</span> <span class="p">(</span><span class="mf">3.8</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">6.2</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">4.9</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">),</span> <span class="p">(</span><span class="mf">6.2</span><span class="p">,</span> <span class="mf">5.1</span><span class="p">)]),</span>
    <span class="p">]</span>

    <span class="n">radius</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="n">circular_obstacles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Point</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span> <span class="o">-</span> <span class="mf">0.4</span><span class="p">),</span>
        <span class="n">Point</span><span class="p">(</span><span class="mf">7.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span><span class="p">),</span>
        <span class="n">Point</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span> <span class="o">+</span> <span class="mf">0.35</span><span class="p">),</span>
        <span class="n">Point</span><span class="p">(</span><span class="mf">7.5</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span> <span class="o">-</span> <span class="mf">0.2</span><span class="p">),</span>
    <span class="p">]</span>

    <span class="n">all_obstacles</span> <span class="o">=</span> <span class="n">corridor_walls</span> <span class="o">+</span> <span class="n">circular_obstacles</span>

    <span class="n">geometry</span> <span class="o">=</span> <span class="n">outer_boundary</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">unary_union</span><span class="p">(</span><span class="n">all_obstacles</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">geometry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_positions_scenario1</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define initial positions and desired speeds.&quot;&quot;&quot;</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_goals_scenario1</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define goal polygons.&quot;&quot;&quot;</span>
    <span class="n">goals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">8.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">8.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">goals</span>


<span class="n">geometry</span> <span class="o">=</span> <span class="n">create_geometry_scenario1</span><span class="p">()</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">define_goals_scenario1</span><span class="p">()</span>
<span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span> <span class="o">=</span> <span class="n">define_positions_scenario1</span><span class="p">()</span>
<span class="n">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>
<span class="n">times_dict</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/8ebc9420dfb27ba566dcebae51dc6b42f9916a9332d5f07a319e4eabc8abc85b.png" src="../_images/8ebc9420dfb27ba566dcebae51dc6b42f9916a9332d5f07a319e4eabc8abc85b.png" />
</div>
</div>
<section id="csm-simulation">
<h3>CSM Simulation<a class="headerlink" href="#csm-simulation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;CFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2AgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 12.92 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="avm-simulation">
<h3>AVM Simulation<a class="headerlink" href="#avm-simulation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;AVM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 14.05 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="sfm-simulation">
<h3>SFM Simulation<a class="headerlink" href="#sfm-simulation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;SFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_3409/1762482793.py:49: DeprecationWarning:

&#39;desiredSpeed&#39; is deprecated, use &#39;desired_speed&#39; instead.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 31.22 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="gcfm-simulation">
<h3>GCFM Simulation<a class="headerlink" href="#gcfm-simulation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;GCFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 37.39 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="evacuation-times">
<h3>Evacuation times<a class="headerlink" href="#evacuation-times" title="Link to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_evacuation_times</span><span class="p">(</span><span class="n">times_dict</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/f48e4d4b1bf157c49225d24effc8dc0d4eb36b0fc7c7be9c7f18c121896bf584.png" src="../_images/f48e4d4b1bf157c49225d24effc8dc0d4eb36b0fc7c7be9c7f18c121896bf584.png" />
</div>
</div>
</section>
</section>
<section id="scenario-2-following-behavior">
<h2>Scenario 2: Following Behavior<a class="headerlink" href="#scenario-2-following-behavior" title="Link to this heading">#</a></h2>
<p>A single-line setup where one agent follows another slower-moving agent, testing how the models handle speed adjustments and eventually overtaking.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_geometry_scenario2</span><span class="p">():</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">geometry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_positions_scenario2</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define initial positions and desired speeds.&quot;&quot;&quot;</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">0.0</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_goals_scenario2</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define goal polygons.&quot;&quot;&quot;</span>
    <span class="n">goals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mi">12</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mi">12</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">goals</span>


<span class="n">geometry</span> <span class="o">=</span> <span class="n">create_geometry_scenario2</span><span class="p">()</span>
<span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span> <span class="o">=</span> <span class="n">define_positions_scenario2</span><span class="p">()</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">define_goals_scenario2</span><span class="p">()</span>
<span class="n">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>
<span class="n">times_dict</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/9f794925469f4c9b8154298d6f457c7524850c6982c79e3d2892abf303e88020.png" src="../_images/9f794925469f4c9b8154298d6f457c7524850c6982c79e3d2892abf303e88020.png" />
</div>
</div>
<section id="id1">
<h3>CSM Simulation<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;CFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2AgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id2">
<h3>AVM Simulation<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;AVM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id3">
<h3>SFM Simulation<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;SFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_3409/1762482793.py:49: DeprecationWarning:

&#39;desiredSpeed&#39; is deprecated, use &#39;desired_speed&#39; instead.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 14.51 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h3>GCFM Simulation<a class="headerlink" href="#id4" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;GCFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="scenario-3-head-on-encounter">
<h2>Scenario 3: Head-on Encounter<a class="headerlink" href="#scenario-3-head-on-encounter" title="Link to this heading">#</a></h2>
<p>Two agents approach each other on a straight line, evaluating how different models resolve direct confrontation and determine which agent yields or how they negotiate passing space.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_geometry_scenario3</span><span class="p">():</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">geometry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_positions_scenario3</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define initial positions and desired speeds.&quot;&quot;&quot;</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span>
        <span class="mf">1.0</span><span class="p">,</span>
        <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_goals_scenario3</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define goal polygons.&quot;&quot;&quot;</span>
    <span class="n">goals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">goals</span>


<span class="n">geometry</span> <span class="o">=</span> <span class="n">create_geometry_scenario3</span><span class="p">()</span>
<span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span> <span class="o">=</span> <span class="n">define_positions_scenario3</span><span class="p">()</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">define_goals_scenario3</span><span class="p">()</span>
<span class="n">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>
<span class="n">times_dict</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/072f1b0ac475129df856e4899738cf15611c8d1cab7f694ab9fc860c4c0d19fc.png" src="../_images/072f1b0ac475129df856e4899738cf15611c8d1cab7f694ab9fc860c4c0d19fc.png" />
</div>
</div>
<section id="id5">
<h3>CSM Simulation<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;CFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2AgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id6">
<h3>AVM Simulation<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;AVM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 8.22 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h3>SFM Simulation<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;SFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_3409/1762482793.py:49: DeprecationWarning:

&#39;desiredSpeed&#39; is deprecated, use &#39;desired_speed&#39; instead.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id8">
<h3>GCFM Simulation<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;GCFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 26.37 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id9">
<h3>Evacuation times<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_evacuation_times</span><span class="p">(</span><span class="n">times_dict</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/846fe26c81abc98e00cea6f143cab58c0e1720601f9ef6cda762534e13379c55.png" src="../_images/846fe26c81abc98e00cea6f143cab58c0e1720601f9ef6cda762534e13379c55.png" />
</div>
</div>
</section>
</section>
<section id="scenario-4-perpendicular-crossing">
<h2>Scenario 4: Perpendicular Crossing<a class="headerlink" href="#scenario-4-perpendicular-crossing" title="Link to this heading">#</a></h2>
<p>Two agents move on intersecting paths - one traveling upward and another moving left to right - creating a potential collision point. This tests how models handle collision avoidance when agents approach at right angles.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_geometry_scenario4</span><span class="p">():</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">geometry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_positions_scenario4</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define initial positions and desired speeds.&quot;&quot;&quot;</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)]</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_goals_scenario4</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define goal polygons.&quot;&quot;&quot;</span>
    <span class="n">goals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]),</span>
        <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">goals</span>


<span class="n">geometry</span> <span class="o">=</span> <span class="n">create_geometry_scenario4</span><span class="p">()</span>
<span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span> <span class="o">=</span> <span class="n">define_positions_scenario4</span><span class="p">()</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">define_goals_scenario4</span><span class="p">()</span>
<span class="n">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>
<span class="n">times_dict</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/79e12160481530059037fdae4e6e7468316c77e4cafd1774e8323f7dfc1c527b.png" src="../_images/79e12160481530059037fdae4e6e7468316c77e4cafd1774e8323f7dfc1c527b.png" />
</div>
</div>
<section id="id10">
<h3>CSM Simulation<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;CFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2AgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 9.33 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id11">
<h3>AVM Simulation<a class="headerlink" href="#id11" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;AVM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 7.51 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id12">
<h3>SFM Simulation<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;SFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_3409/1762482793.py:49: DeprecationWarning:

&#39;desiredSpeed&#39; is deprecated, use &#39;desired_speed&#39; instead.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 10.20 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id13">
<h3>GCFM Simulation<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;GCFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 12.39 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id14">
<h3>Evacuation times<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_evacuation_times</span><span class="p">(</span><span class="n">times_dict</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/0a8f0b55e1b61702f38304431d2ef7b0fe7bb6b5c57546cdb6d0e8e40a09f179.png" src="../_images/0a8f0b55e1b61702f38304431d2ef7b0fe7bb6b5c57546cdb6d0e8e40a09f179.png" />
</div>
</div>
</section>
</section>
<section id="scenario-5-movement-of-individuals-in-a-bottleneck">
<h2>Scenario 5: Movement of individuals in a bottleneck<a class="headerlink" href="#scenario-5-movement-of-individuals-in-a-bottleneck" title="Link to this heading">#</a></h2>
<p>Agents are initialized in a semicircular formation surrounding a bottleneck. For reference, see <a class="reference external" href="https://ped.fz-juelich.de/da/doku.php?id=bottleneck_individuals">this experiment</a>.</p>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_geometry_scenario5</span><span class="p">():</span>
    <span class="c1"># Outer boundary</span>
    <span class="n">outer</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]</span>

    <span class="c1"># Inner holes (from the second polygon)</span>
    <span class="n">hole1</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="n">hole2</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">4.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>

    <span class="c1"># Create polygon with holes</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">outer</span><span class="p">,</span> <span class="n">holes</span><span class="o">=</span><span class="p">[</span><span class="n">hole1</span><span class="p">,</span> <span class="n">hole2</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">geometry</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_positions_scenario5</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define initial positions and desired speeds.&quot;&quot;&quot;</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span>
        <span class="p">(</span><span class="o">-</span><span class="mf">3.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span>
        <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.5</span><span class="p">),</span>
        <span class="p">(</span><span class="mf">3.5</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">speeds</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span>


<span class="k">def</span><span class="w"> </span><span class="nf">define_goals_scenario5</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define 7 goals polygons.&quot;&quot;&quot;</span>
    <span class="n">goals</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="p">[</span><span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])]</span>
    <span class="k">return</span> <span class="n">goals</span>


<span class="n">geometry</span> <span class="o">=</span> <span class="n">create_geometry_scenario5</span><span class="p">()</span>
<span class="n">positions</span><span class="p">,</span> <span class="n">speeds</span> <span class="o">=</span> <span class="n">define_positions_scenario5</span><span class="p">()</span>
<span class="n">goals</span> <span class="o">=</span> <span class="n">define_goals_scenario5</span><span class="p">()</span>
<span class="n">plot_simulation_configuration</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">positions</span><span class="p">,</span> <span class="n">goals</span><span class="p">)</span>
<span class="n">times_dict</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/35139a22845e9e5a8ba2d767d2263308a015cbfe6ed67f3571a1c8b18bc41e27.png" src="../_images/35139a22845e9e5a8ba2d767d2263308a015cbfe6ed67f3571a1c8b18bc41e27.png" />
</div>
</div>
<section id="id15">
<h3>CSM Simulation<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;CFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">CollisionFreeSpeedModelV2AgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 12.28 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id16">
<h3>AVM Simulation<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;AVM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">AnticipationVelocityModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 12.39 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id17">
<h3>SFM Simulation<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;SFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">SocialForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_3409/1762482793.py:49: DeprecationWarning:

&#39;desiredSpeed&#39; is deprecated, use &#39;desired_speed&#39; instead.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id18">
<h3>GCFM Simulation<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;GCFM&quot;</span>
<span class="n">trajectory_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">.sqlite&quot;</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">initialize_simulation</span><span class="p">(</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModel</span><span class="p">(),</span>
    <span class="n">jps</span><span class="o">.</span><span class="n">GeneralizedCentrifugalForceModelAgentParameters</span><span class="p">,</span>
    <span class="n">geometry</span><span class="p">,</span>
    <span class="n">goals</span><span class="p">,</span>
    <span class="n">positions</span><span class="p">,</span>
    <span class="n">speeds</span><span class="p">,</span>
    <span class="n">trajectory_file</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">times_dict</span><span class="p">[</span><span class="n">model</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_simulation</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">trajectories</span><span class="p">,</span> <span class="n">walkable_area</span> <span class="o">=</span> <span class="n">read_sqlite_file</span><span class="p">(</span><span class="n">trajectory_file</span><span class="p">)</span>
<span class="n">animate</span><span class="p">(</span>
    <span class="n">trajectories</span><span class="p">,</span>
    <span class="n">walkable_area</span><span class="p">,</span>
    <span class="n">title_note</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
    <span class="n">every_nth_frame</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Evacuation time: 20.00 s
</pre></div>
</div>
</div>
</div>
</section>
<section id="id19">
<h3>Evacuation times<a class="headerlink" href="#id19" title="Link to this heading">#</a></h3>
<div class="cell tag_hide-input docutils container">
<details class="admonition hide above-input">
<summary aria-label="Toggle hidden content">
<p class="collapsed admonition-title">Show code cell source</p>
<p class="expanded admonition-title">Hide code cell source</p>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_evacuation_times</span><span class="p">(</span><span class="n">times_dict</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<img alt="../_images/f423c146bc5960213226260647da5e593609f86c2d40b4bc808aea81be28bf0b.png" src="../_images/f423c146bc5960213226260647da5e593609f86c2d40b4bc808aea81be28bf0b.png" />
</div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Notebooks</p>
      </div>
    </a>
    <a class="right-next"
       href="corner.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Movement around Corners</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objective">Objective</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#force-based-models">Force-Based Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#velocity-based-models">Velocity-Based Models</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computational-efficiency">Computational Efficiency</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#model-selection-guidance">Model Selection Guidance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#models-under-investigation">Models Under Investigation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-1-crossing-paths-in-rooms">Scenario 1: Crossing Paths in Rooms</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#csm-simulation">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#avm-simulation">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sfm-simulation">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gcfm-simulation">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#evacuation-times">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-2-following-behavior">Scenario 2: Following Behavior</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">GCFM Simulation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-3-head-on-encounter">Scenario 3: Head-on Encounter</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-4-perpendicular-crossing">Scenario 4: Perpendicular Crossing</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Evacuation times</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scenario-5-movement-of-individuals-in-a-bottleneck">Scenario 5: Movement of individuals in a bottleneck</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">CSM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">AVM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">SFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">GCFM Simulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Evacuation times</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Author name not set
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025, Forschungszentrum JÃ¼lich GmbH, IAS-7.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>