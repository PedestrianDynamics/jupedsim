<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Mohcine Chraibi">
  
  <title>Juelich - JuPedSim/jpscore</title>
  

  <link rel="shortcut icon" href="../../favicon.icon">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../html/customdoxygen.css" rel="stylesheet">
  <link href="../../html/doxygen.css" rel="stylesheet">
  <link href="../../html/tabs.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Juelich";
    var mkdocs_page_input_path = "tests/juelich.md";
    var mkdocs_page_url = "/tests/juelich/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> JuPedSim/jpscore</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../user_guide/requirements/">Requirements</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../user_guide/configuration/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../user_guide/vagrant/">Vagrant</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../user_guide/quickstart/">Quickstart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../user_guide/data_formats/">File formats</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Contributing</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../contributing/code-Style-Conventions/">Code Style</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../contributing/workflow/">Workflow</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../contributing/utest/">Unit testing</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Models</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../models/operativ/">Operational models</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../models/direction/">Direction strategies</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../models/routing/">Routing</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tests</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../introduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rimea/">RiMEA</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Juelich</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#juelich-tests">Juelich tests</a></li>
                
                    <li><a class="toctree-l4" href="#verification">Verification</a></li>
                
                    <li><a class="toctree-l4" href="#validation">Validation</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>About</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/disclaimer/">Disclaimer</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/LICENSE/">License</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../about/contributors/">Contributors</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../publications/">Publications</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../doxygen/">API</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">JuPedSim/jpscore</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Tests &raquo;</li>
        
      
    
    <li>Juelich</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/JuPedSim/jpscore" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="juelich-tests"><a class="toclink" href="#juelich-tests">Juelich tests</a></h1>
<p>These tests are largely similar to the <a href="../rimea">RiMEA tests</a>.
They are extendend by <strong>verification</strong> tests to verify the validy of some algorithms implemented in JuPedSim and some <strong>validation</strong> tests based on experimental data.</p>
<hr />
<h2 id="verification"><a class="toclink" href="#verification">Verification</a></h2>
<ul>
<li>
<p><strong>Test 1</strong>: : Free flow movement in a corridor</p>
<p>A pedestrian that starts in the middle of a corridor (i.e. is not influenced by the walls)
should move with its free flow velocity towards the  exit. </p>
</li>
<li>
<p><strong>Test 2</strong>: One pedestrian moving in a corridor</p>
<p>Rotating the same geometry as in test 1 around the <script type="math/tex">z-</script>axis by an arbitrary angle e.g. <script type="math/tex">45^\circ</script> should lead to the evacuation time of 10 s.</p>
</li>
<li>
<p><strong>Test 3</strong>: One pedestrian moving in a corridor with a desired direction</p>
<p>A pedestrian is started from a random position in a holding area.
This test should be repeated with different initial positions.</p>
<p>Expected result: The pedestrians should be able to reach the marked goal in all repetitions of the test.</p>
</li>
<li>
<p><strong>Test 4</strong>: Single pedestrian moving in a corridor with an obstacle</p>
<p>Two pedestrians are aligned in the same room. The second pedestrian from left is standing and will not move during the test.</p>
<p>Expected result: Pedestrian left should be able to overtake the standing pedestrian</p>
</li>
<li>
<p><strong>Test 5</strong>: Single pedestrian moving in a very narrow corridor with an obstacle</p>
<p>This test is Similar to test 4. Two pedestrians are aligned in the same room. The second pedestrian from left is standing and will not move during the test. The corridor is narrow and does not allow passing of two pedestians without serious overlapping.</p>
<p>Expected result: Pedestrian left should stop without overlapping with the standing pedestrian.</p>
</li>
<li>
<p><strong>Test 6</strong>: single pedestrian moving in a corridor with more that one target</p>
<p>A pedestrian is moving in a corridor with several intermediate goals.</p>
<p>Expected result: The pedestrian should move through the different targets without a substantial change in its velocity i.e. with a desired speed of 1 m/s the distance of 10 m should be covered in 10 s.</p>
</li>
<li>
<p><strong>Test 7</strong>: route choice with different exits</p>
<p>In this section the correct behavior of the implemented routing algorithms as well as the correct router-assignment are tested. The investigated geometry has three different exists.</p>
<ul>
<li>Two different groups of pedestrians are randomly distributed in the inner room, such that the first group is nearer to <script type="math/tex">\rm{E_1}</script> than to  <script type="math/tex">\rm{E_2}</script>. The number of pedestrians in both groups is relatively small but is equal (<script type="math/tex">N_{\rm{group 1}}=N_{\rm{group 2}}=10</script>). The router strategy is <code>local shortest</code>.</li>
<li>One group of pedestrians (<script type="math/tex">N = 50</script>) is randomly distributed in the inner room. The router strategy is <code>local shortest</code>.</li>
<li>One group of pedestrians (<script type="math/tex">N = 50</script> is randomly distributed in the inner room. The router strategy is <code>global shortest</code>.</li>
</ul>
<p>Expected result: The pedestrians should be able to choose between the local shortest as well as the global shortest route.</p>
</li>
<li>
<p><strong>Test 8</strong>: visibility and obstacle
    The position of one pedestrian is initialized such that it has no direct view to the exit.</p>
<p>Expected result: The pedestrian should avoid the obstacle and exit the room without overlapping with the obstacle.</p>
</li>
<li>
<p><strong>Test 9</strong>: runtime optimization using parallelism</p>
<p>Implementations that make use of parallel paradigms e.g. OpenMP are tested  as follows:</p>
<ol>
<li>Distribute randomly 100 pedestrians in the gray area.</li>
<li>Measure the flow through the bottleneck of the evacuation time i.e. the time necessary for the last pedestrian to leave the system.</li>
<li>Repeat points 1 and 2 several times to get a certain statistical significance of the results.</li>
</ol>
<p>Expected results:
- The simulation results (flow, evacuation time, &hellip;) should be invariant with respect to the number of cores used.
- The run time should scale with the number of cores.</p>
</li>
<li>
<p><strong>Test 10</strong>: runtime optimization using Verlet neighbor lists or cell-linked list method</p>
<p>This test maybe specific for force-based models. In order to reduce the complexity of calculating interactions among <script type="math/tex">N</script> pedestrians from <script type="math/tex">\mathcal{O}(N^2)</script>, several techniques can be used to keep track of the neighbors.
<!-- In Fig. \ref{fig:test10} a partition of the simulation domain by means of cells is shown. -->
The edge length of one cell is bigger than the cut-off radius of the interaction force.</p>
<ul>
<li>Expected results:
The simulation results (flow, &hellip;) should be the same, for the same initial conditions, with cell size bigger than the cut-off radius of the force-based model used.
The simulation should fail for a cell size smaller than the cut-off radius of the forces.
The simulation time should scale with the cell size.</li>
</ul>
</li>
<li>
<p><strong>Test 11</strong>: Test the room/subroom construct <sup id="fnref:note1"><a class="footnote-ref" href="#fn:note1" rel="footnote">1</a></sup></p>
<p>The same geometry is constructed differently
The whole geometry is designed as a <code>rooms</code> (i.e. utility space)
The geometry is designed by dividing the utility space in connected <code>subrooms</code></p>
<p>Distribute randomly pedestrians in all sub-rooms of the geometry and repeat the simulation to get a certain statistical significance.</p>
<p>Expected results:
The mean value of the evacuation times calculated from both cases should not differ.</p>
</li>
<li>
<p><strong>Test 12</strong>: Obstructed visibility</p>
<p>Four pedestrians being simulated in a bottleneck. Pedestrians 0 and 1 have zero desired speed i.e. they will not move during the simulation whereas pedestrians 2 and 3 are heading towards the exit.</p>
<p>The visibility between pedestrians 2 resp. 3 and 0 resp. 2 is obstructed by a wall resp. an obstacle.</p>
<p>Expected results: Pedestrians 2 and 3 should not deviate from the horizontal dashed line.</p>
</li>
<li>
<p><strong>Test 13</strong>: Uniform distribution of initial positions</p>
<p>The initial distribution of the pedestrian should be uniform. In a square room (<script type="math/tex">100\times 100\,</script>
<script type="math/tex">m^2</script>) 2000 pedestrians are randomly distributed. The test is repeated 1000 times.
Divide the room equidistantly in 10 regions with respect to <script type="math/tex">x</script>- and <script type="math/tex">y-</script> axis and count the number of pedestrians in each square.
This count should be roughly the same in all squares:</p>
</li>
</ul>
<pre><code class="python">import numpy as np
import scipy, scipy.stats
import matplotlib.pyplot as plt

filename = &quot;./path/to/file.txt&quot;
data = np.loadtxt(filename)

x = data[:,2]
y = data[:,3]

nx = plt.hist(x, bins=10)[0]
ny = plt.hist(y, bins=10)[0]

px = scipy.stats.chisquare(nx)[1]
py = scipy.stats.chisquare(ny)[1]
</code></pre>

<p>Expected result: The mean value of the 1000 p-values of the <script type="math/tex">\chi^2</script>-test should be around 0.5.</p>
<ul>
<li>
<p><strong>Test 15</strong>: Runtime of the code
    The purpose of this test is to make sure that the code is not getting slower! The test scenario is set up such that
    the <strong>evacuation times is larger that the execution time</strong>. This test is ideally run in form of a nightly build.</p>
<p>Expected result: <script type="math/tex">t_{\rm{evac}}\ge t_{\rm{exec}}</script>.</p>
</li>
</ul>
<h2 id="validation"><a class="toclink" href="#validation">Validation</a></h2>
<ul>
<li>
<p><strong>Test 1</strong>: 1D movement with periodical boundary</p>
<p>The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
<li>
<p><strong>Test 2</strong>: 2D unidirectional flow in corridor with periodical boundary</p>
<p>The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
<li>
<p><strong>Test 3</strong>: Unidirectional flow in corridor with open boundary</p>
<p>The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
<li>
<p><strong>Test 4</strong>: Unidirectional flow around a Corner</p>
<p>The fundamental diagram is measured in two different locations. Before the corner and after the corner.
The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
<li>
<p><strong>Test 5</strong>: Flow through bottleneck</p>
<p>The flow  <script type="math/tex">J = N / \Delta t</script>, with <script type="math/tex">N</script> is the total number of participants in the run and <script type="math/tex">\Delta t</script> is the time interval between the first and the last pedestrian entering the bottleneck, should increase linearly with increasing width of the bottleneck.</p>
</li>
<li>
<p><strong>Test 6</strong>: Merging flow in T-junction</p>
<p>The fundamental diagram is measured in three different locations.
Right and left of the T-junction and after the merging of flows.</p>
<p>The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
<li>
<p><strong>Test 7</strong> - Bidirectional flow in corridor</p>
<p>The shape of the fundamental diagram (<script type="math/tex">\rho, v</script>) should be realistic (decreasing velocity with increasing density).</p>
</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:note1">
<p>This test should be removed after refactoring the geometry-class. There will be not <code>subroom</code> anymore. &#160;<a class="footnote-backref" href="#fnref:note1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../about/disclaimer/" class="btn btn-neutral float-right" title="Disclaimer">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../rimea/" class="btn btn-neutral" title="RiMEA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2016 <a href="http://www.fz-juelich.de">Forschungszentrum JÃ¼lich GmbH</a>. Maintenance by <a href="http://www.fz-juelich.de/SharedDocs/Personen/IAS/JSC/EN/staff/chraibi_m.html/">Mohcine Chraibi</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/JuPedSim/jpscore" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../rimea/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../about/disclaimer/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
